import React, { useState, useEffect } from 'react';
import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';
import { ParallaxProvider, Parallax } from 'react-scroll-parallax';
import { Menu, X, GitHub, Linkedin, Mail } from 'lucide-react';

// Mock data for portfolio returns
const generatePortfolioData = () => {
  const portfolios = ['Tech Stocks', 'Crypto', 'Real Estate', 'Bonds'];
  return portfolios.map(portfolio => ({
    name: portfolio,
    data: Array.from({ length: 12 }, (_, i) => ({
      month: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'][i],
      return: (Math.random() * 40) - 20
    }))
  }));
};

const Header = ({ toggleMenu }) => (
  <header className="fixed top-0 left-0 right-0 bg-white shadow-md z-50">
    <nav className="container mx-auto px-6 py-3 flex justify-between items-center">
      <h1 className="text-xl font-bold">John Doe</h1>
      <button onClick={toggleMenu} className="md:hidden">
        <Menu size={24} />
      </button>
      <ul className="hidden md:flex space-x-4">
        <li><a href="#home" className="hover:text-blue-500">Home</a></li>
        <li><a href="#about" className="hover:text-blue-500">About</a></li>
        <li><a href="#projects" className="hover:text-blue-500">Projects</a></li>
        <li><a href="#contact" className="hover:text-blue-500">Contact</a></li>
      </ul>
    </nav>
  </header>
);

const MobileMenu = ({ isOpen, toggleMenu }) => (
  <div className={`fixed inset-0 bg-gray-800 bg-opacity-50 z-50 ${isOpen ? 'block' : 'hidden'} md:hidden`}>
    <div className="bg-white h-full w-64 shadow-lg">
      <button onClick={toggleMenu} className="absolute top-3 right-3">
        <X size={24} />
      </button>
      <ul className="pt-16 px-6 space-y-4">
        <li><a href="#home" className="block py-2 hover:text-blue-500" onClick={toggleMenu}>Home</a></li>
        <li><a href="#about" className="block py-2 hover:text-blue-500" onClick={toggleMenu}>About</a></li>
        <li><a href="#projects" className="block py-2 hover:text-blue-500" onClick={toggleMenu}>Projects</a></li>
        <li><a href="#contact" className="block py-2 hover:text-blue-500" onClick={toggleMenu}>Contact</a></li>
      </ul>
    </div>
  </div>
);

const Home = () => (
  <section id="home" className="min-h-screen flex items-center justify-center bg-gray-100">
    <Parallax translateY={[-20, 20]}>
      <div className="text-center">
        <h1 className="text-4xl font-bold mb-4">John Doe</h1>
        <p className="text-xl mb-8">Fintech Developer & Data Scientist</p>
        <a href="#contact" className="bg-blue-500 text-white px-6 py-2 rounded-full hover:bg-blue-600 transition duration-300">Get in Touch</a>
      </div>
    </Parallax>
  </section>
);

const About = () => (
  <section id="about" className="py-20 bg-white">
    <div className="container mx-auto px-6">
      <h2 className="text-3xl font-bold mb-8 text-center">About Me</h2>
      <Parallax translateY={[-10, 10]}>
        <p className="text-lg mb-6">
          I'm a passionate fintech developer with 5+ years of experience in building innovative financial solutions. 
          My expertise lies in algorithmic trading, blockchain technology, and data analysis.
        </p>
        <p className="text-lg mb-6">
          I've worked with leading financial institutions to develop robust and scalable systems that handle millions 
          of transactions daily. My goal is to revolutionize the financial industry through cutting-edge technology.
        </p>
      </Parallax>
    </div>
  </section>
);

const PortfolioChart = ({ data }) => (
  <ResponsiveContainer width="100%" height={300}>
    <LineChart data={data}>
      <CartesianGrid strokeDasharray="3 3" />
      <XAxis dataKey="month" />
      <YAxis />
      <Tooltip />
      <Legend />
      <Line type="monotone" dataKey="return" stroke={data[data.length - 1].return >= 0 ? "#4CAF50" : "#F44336"} />
    </LineChart>
  </ResponsiveContainer>
);

const Projects = () => {
  const [portfolios] = useState(generatePortfolioData());

  return (
    <section id="projects" className="py-20 bg-gray-100">
      <div className="container mx-auto px-6">
        <h2 className="text-3xl font-bold mb-8 text-center">Projects</h2>
        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
          {portfolios.map((portfolio, index) => (
            <Parallax key={index} translateY={[-10, 10]}>
              <div className="bg-white p-6 rounded-lg shadow-md">
                <h3 className="text-xl font-semibold mb-4">{portfolio.name}</h3>
                <PortfolioChart data={portfolio.data} />
              </div>
            </Parallax>
          ))}
        </div>
      </div>
    </section>
  );
};

const Contact = () => (
  <section id="contact" className="py-20 bg-white">
    <div className="container mx-auto px-6">
      <h2 className="text-3xl font-bold mb-8 text-center">Get in Touch</h2>
      <Parallax translateY={[-10, 10]}>
        <div className="flex justify-center space-x-6">
          <a href="https://github.com" target="_blank" rel="noopener noreferrer" className="text-gray-600 hover:text-blue-500">
            <GitHub size={24} />
          </a>
          <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer" className="text-gray-600 hover:text-blue-500">
            <Linkedin size={24} />
          </a>
          <a href="mailto:john.doe@example.com" className="text-gray-600 hover:text-blue-500">
            <Mail size={24} />
          </a>
        </div>
      </Parallax>
    </div>
  </section>
);

const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth >= 768) {
        setIsMenuOpen(false);
      }
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  return (
    <ParallaxProvider>
      <div className="font-sans">
        <Header toggleMenu={toggleMenu} />
        <MobileMenu isOpen={isMenuOpen} toggleMenu={toggleMenu} />
        <main>
          <Home />
          <About />
          <Projects />
          <Contact />
        </main>
      </div>
    </ParallaxProvider>
  );
};

export default App;